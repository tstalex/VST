

Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:04:49) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1382,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1383,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1384,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1385,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1386,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1387,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1388,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1389,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1390,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00+03:00\",\"sailed\":\"2010-08-23T13:30:00+03:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;35;1mProforma Load (1.0ms)[0m   [0mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;36;1mProfTarifCalc Delete all (115.0ms)[0m   [0;1mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;35;1mProfTarifCalc Create (4.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:04:49', '2010-09-12 08:04:49', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (1.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:04:49', '2010-09-12 08:04:49', 'GT * 0.415', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', '110 *2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:04:49', '2010-09-12 08:04:49', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', '13524.00 * 2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', 'Passengers * 300', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:04:49', '2010-09-12 08:04:49', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
Completed in 295ms (View: 13, DB: 123) | 200 OK [http://localhost/proformas/3]


Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:04:49) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1382,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1383,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1384,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1385,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1386,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1387,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1388,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1389,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1390,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00\",\"sailed\":\"2010-08-23T13:30:00+03:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;36;1mProforma Load (1.0ms)[0m   [0;1mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;35;1mProfTarifCalc Delete all (128.0ms)[0m   [0mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;36;1mProfTarifCalc Create (2.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'GT * 0.415', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '110 *2', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (1.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '13524.00 * 2', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'Passengers * 300', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
Completed in 345ms (View: 6, DB: 134) | 200 OK [http://localhost/proformas/3]


Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:04:50) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1382,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1383,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1384,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1385,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1386,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1387,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1388,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1389,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1390,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00\",\"sailed\":\"2010-08-23T10:30:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;35;1mProforma Load (1.0ms)[0m   [0mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;36;1mProfTarifCalc Delete all (126.0ms)[0m   [0;1mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;35;1mProfTarifCalc Create (2.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'GT * 0.415', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '110 *2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', '13524.00 * 2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (1.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'Passengers * 300', NULL)[0m
  [4;35;1mProfTarifCalc Create (1.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:04:50', '2010-09-12 08:04:50', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
  [4;36;1mProforma Update (3.0ms)[0m   [0;1mUPDATE "proformas" SET "sailed" = '2010-08-23 07:30:00', "updated_at" = '2010-09-12 08:04:50' WHERE "id" = 3[0m
Completed in 449ms (View: 12, DB: 135) | 200 OK [http://localhost/proformas/3]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:04:51) [GET]
  Parameters: {"_dc"=>"1284278689489", "port_id"=>"183"}
Id= 183
  [4;35;1mPort Load (1.0ms)[0m   [0mSELECT "ports".id FROM "ports" WHERE ("ports"."id" = 183) LIMIT 1[0m
  [4;36;1mPort Load (1.0ms)[0m   [0;1mSELECT * FROM "ports" WHERE ("ports"."id" = 183) [0m
  [4;35;1mTarifCalculation Load (0.0ms)[0m   [0mSELECT * FROM "tarif_calculations" WHERE (port_id = 183) ORDER BY tarif_calculations.id DESC LIMIT 1[0m
  [4;36;1mTarif Load (1.0ms)[0m   [0;1mSELECT * FROM "tarifs" WHERE ("tarifs".tarif_calculation_id = 9) [0m
Completed in 49ms (View: 16, DB: 4) | 200 OK [http://localhost/ports/tarifs?_dc=1284278689489&port_id=183]


Processing ProfTarifCalcsController#index (for 127.0.0.1 at 2010-09-12 11:04:51) [GET]
  Parameters: {"_dc"=>"1284278689493", "proforma_id"=>"3"}
  [4;35;1mProfTarifCalc Load (1.0ms)[0m   [0mSELECT * FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = '3') [0m
Completed in 25ms (View: 10, DB: 2) | 200 OK [http://localhost/prof_tarif_calcs?_dc=1284278689493&proforma_id=3]


Processing BaseController#show (for 127.0.0.1 at 2010-09-12 11:06:03) [GET]
Rendering base/show
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://localhost/base/show]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:06:04) [GET]
  Parameters: {"_dc"=>"1284278764804"}
  [4;36;1mCountry Load (16.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 246ms (View: 162, DB: 19) | 200 OK [http://localhost/countries?_dc=1284278764804]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:06:05) [GET]
  Parameters: {"_dc"=>"1284278764812"}
  [4;35;1mVesselType Load (1.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 21ms (View: 10, DB: 3) | 200 OK [http://localhost/vessel_types?_dc=1284278764812]


Processing CountriesController#show (for 127.0.0.1 at 2010-09-12 11:06:05) [GET]
  Parameters: {"_dc"=>"1284278764974", "id"=>"with_ports"}
  [4;36;1mCountry Load (1.0ms)[0m   [0;1mselect distinct countries.* from countries inner join ports where ports.country=countries.id[0m
Completed in 22ms (View: 9, DB: 2) | 200 OK [http://localhost/countries/with_ports?_dc=1284278764974]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:06:05) [GET]
  Parameters: {"_dc"=>"1284278764815"}
  [4;35;1mVessel Load (4.0ms)[0m   [0mSELECT * FROM "vessels" [0m
Completed in 64ms (View: 41, DB: 6) | 200 OK [http://localhost/vessels?_dc=1284278764815]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:06:05) [GET]
  Parameters: {"_dc"=>"1284278764808"}
  [4;36;1mCurrency Load (1.0ms)[0m   [0;1mSELECT * FROM "currencies" [0m
Completed in 18ms (View: 7, DB: 2) | 200 OK [http://localhost/currencies?_dc=1284278764808]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:06:06) [GET]
  Parameters: {"_dc"=>"1284278764817"}
  [4;35;1mPort Load (4.0ms)[0m   [0mSELECT * FROM "ports" [0m
Completed in 85ms (View: 67, DB: 5) | 200 OK [http://localhost/ports?_dc=1284278764817]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:06:06) [GET]
  Parameters: {"_dc"=>"1284278766173"}
  [4;36;1mCountry Load (14.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 227ms (View: 195, DB: 15) | 200 OK [http://localhost/countries?_dc=1284278766173]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:06:06) [GET]
  Parameters: {"_dc"=>"1284278766594"}
  [4;35;1mCurrency Load (0.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 18ms (View: 7, DB: 2) | 200 OK [http://localhost/currencies?_dc=1284278766594]


Processing IceClassesController#index (for 127.0.0.1 at 2010-09-12 11:06:06) [GET]
  Parameters: {"_dc"=>"1284278766794"}
  [4;36;1mIceClass Load (1.0ms)[0m   [0;1mSELECT * FROM "ice_classes" [0m
Completed in 63ms (View: 45, DB: 3) | 200 OK [http://localhost/ice_classes?_dc=1284278766794]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:06:07) [GET]
  Parameters: {"_dc"=>"1284278767046"}
  [4;35;1mVesselType Load (0.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 21ms (View: 10, DB: 1) | 200 OK [http://localhost/vessel_types?_dc=1284278767046]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:06:07) [GET]
  Parameters: {"_dc"=>"1284278767197"}
  [4;36;1mVessel Load (4.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 113ms (View: 89, DB: 6) | 200 OK [http://localhost/vessels?_dc=1284278767197]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:06:07) [GET]
  Parameters: {"_dc"=>"1284278767500"}
  [4;35;1mPort Load (5.0ms)[0m   [0mSELECT * FROM "ports" [0m
Completed in 53ms (View: 36, DB: 7) | 200 OK [http://localhost/ports?_dc=1284278767500]


Processing TreeElementsController#index (for 127.0.0.1 at 2010-09-12 11:06:07) [GET]
  Parameters: {"_dc"=>"1284278767788", "node"=>"source"}
  [4;36;1mTreeElement Load (1.0ms)[0m   [0;1mSELECT * FROM "tree_elements" [0m
  [4;35;1mTreeElement Load (2.0ms)[0m   [0mselect 
0 id, 'All' text, '{getPanel:function() {return Ports.showPanel(-1);}}' tag, 3 parent_id, 1000 sort_order, 'true' leaf 
union
SELECT distinct 
c.id, c.text, '{getPanel:function() {return Ports.showPanel('|| c.id ||');}}' tag, 3 parent_id, count(*) sort_order, 'true' leaf 
from countries c inner join ports p on c.id=p.country group by c.id, c.text, leaf order by sort_order desc[0m
Completed in 23ms (View: 7, DB: 5) | 200 OK [http://localhost/tree_elements?_dc=1284278767788&node=source]


Processing BaseController#show (for 127.0.0.1 at 2010-09-12 11:06:13) [GET]
Rendering base/show
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://localhost/base/show]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:06:15) [GET]
  Parameters: {"_dc"=>"1284278775458"}
  [4;36;1mCountry Load (14.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 231ms (View: 196, DB: 15) | 200 OK [http://localhost/countries?_dc=1284278775458]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:06:16) [GET]
  Parameters: {"_dc"=>"1284278775472"}
  [4;35;1mVesselType Load (1.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 26ms (View: 11, DB: 3) | 200 OK [http://localhost/vessel_types?_dc=1284278775472]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:06:16) [GET]
  Parameters: {"_dc"=>"1284278775478"}
  [4;36;1mVessel Load (3.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 40ms (View: 24, DB: 4) | 200 OK [http://localhost/vessels?_dc=1284278775478]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:06:16) [GET]
  Parameters: {"_dc"=>"1284278775467"}
  [4;35;1mCurrency Load (1.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 19ms (View: 8, DB: 2) | 200 OK [http://localhost/currencies?_dc=1284278775467]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:06:16) [GET]
  Parameters: {"_dc"=>"1284278775483"}
  [4;36;1mPort Load (5.0ms)[0m   [0;1mSELECT * FROM "ports" [0m
Completed in 91ms (View: 71, DB: 6) | 200 OK [http://localhost/ports?_dc=1284278775483]


Processing CountriesController#show (for 127.0.0.1 at 2010-09-12 11:06:16) [GET]
  Parameters: {"_dc"=>"1284278776057", "id"=>"with_ports"}
  [4;35;1mCountry Load (2.0ms)[0m   [0mselect distinct countries.* from countries inner join ports where ports.country=countries.id[0m
Completed in 24ms (View: 10, DB: 3) | 200 OK [http://localhost/countries/with_ports?_dc=1284278776057]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:06:17) [GET]
  Parameters: {"_dc"=>"1284278777146"}
  [4;36;1mCountry Load (50.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 235ms (View: 166, DB: 52) | 200 OK [http://localhost/countries?_dc=1284278777146]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:06:17) [GET]
  Parameters: {"_dc"=>"1284278777573"}
  [4;35;1mCurrency Load (1.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 20ms (View: 8, DB: 2) | 200 OK [http://localhost/currencies?_dc=1284278777573]


Processing IceClassesController#index (for 127.0.0.1 at 2010-09-12 11:06:17) [GET]
  Parameters: {"_dc"=>"1284278777789"}
  [4;36;1mIceClass Load (0.0ms)[0m   [0;1mSELECT * FROM "ice_classes" [0m
Completed in 18ms (View: 6, DB: 2) | 200 OK [http://localhost/ice_classes?_dc=1284278777789]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:06:18) [GET]
  Parameters: {"_dc"=>"1284278777994"}
  [4;35;1mVesselType Load (1.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 22ms (View: 10, DB: 2) | 200 OK [http://localhost/vessel_types?_dc=1284278777994]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:06:18) [GET]
  Parameters: {"_dc"=>"1284278778191"}
  [4;36;1mVessel Load (2.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 35ms (View: 21, DB: 4) | 200 OK [http://localhost/vessels?_dc=1284278778191]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:06:18) [GET]
  Parameters: {"_dc"=>"1284278778420"}
  [4;35;1mPort Load (9.0ms)[0m   [0mSELECT * FROM "ports" [0m
Completed in 94ms (View: 71, DB: 11) | 200 OK [http://localhost/ports?_dc=1284278778420]


Processing TreeElementsController#index (for 127.0.0.1 at 2010-09-12 11:06:18) [GET]
  Parameters: {"_dc"=>"1284278778814", "node"=>"source"}
  [4;36;1mTreeElement Load (1.0ms)[0m   [0;1mSELECT * FROM "tree_elements" [0m
  [4;35;1mTreeElement Load (2.0ms)[0m   [0mselect 
0 id, 'All' text, '{getPanel:function() {return Ports.showPanel(-1);}}' tag, 3 parent_id, 1000 sort_order, 'true' leaf 
union
SELECT distinct 
c.id, c.text, '{getPanel:function() {return Ports.showPanel('|| c.id ||');}}' tag, 3 parent_id, count(*) sort_order, 'true' leaf 
from countries c inner join ports p on c.id=p.country group by c.id, c.text, leaf order by sort_order desc[0m
Completed in 23ms (View: 6, DB: 5) | 200 OK [http://localhost/tree_elements?_dc=1284278778814&node=source]


Processing ProformasController#index (for 127.0.0.1 at 2010-09-12 11:29:20) [GET]
  Parameters: {"_dc"=>"1284280160167"}
  [4;36;1mProforma Load (1.0ms)[0m   [0;1mSELECT * FROM "proformas" [0m
Completed in 26ms (View: 12, DB: 3) | 200 OK [http://localhost/proformas?_dc=1284280160167]


Processing PortsController#with_tarifs (for 127.0.0.1 at 2010-09-12 11:29:22) [GET]
  Parameters: {"_dc"=>"1284280160175"}
  [4;35;1mPort Load (2.0ms)[0m   [0mSELECT distinct * FROM ports a where exists (select 1 from tarif_calculations b inner join tarifs c on b.id=c.tarif_calculation_id where a.id=b.port_id) [0m
Completed in 21ms (View: 9, DB: 4) | 200 OK [http://localhost/ports/with_tarifs?_dc=1284280160175]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:29:22) [GET]
  Parameters: {"_dc"=>"1284280160216", "port_id"=>"-1"}
Id= -1
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://localhost/ports/tarifs?_dc=1284280160216&port_id=-1]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:29:22) [GET]
  Parameters: {"_dc"=>"1284280162772", "port_id"=>"183"}
Id= 183
  [4;36;1mPort Load (1.0ms)[0m   [0;1mSELECT "ports".id FROM "ports" WHERE ("ports"."id" = 183) LIMIT 1[0m
  [4;35;1mPort Load (1.0ms)[0m   [0mSELECT * FROM "ports" WHERE ("ports"."id" = 183) [0m
  [4;36;1mTarifCalculation Load (1.0ms)[0m   [0;1mSELECT * FROM "tarif_calculations" WHERE (port_id = 183) ORDER BY tarif_calculations.id DESC LIMIT 1[0m
  [4;35;1mTarif Load (1.0ms)[0m   [0mSELECT * FROM "tarifs" WHERE ("tarifs".tarif_calculation_id = 9) [0m
Completed in 43ms (View: 13, DB: 6) | 200 OK [http://localhost/ports/tarifs?_dc=1284280162772&port_id=183]


Processing ProfTarifCalcsController#index (for 127.0.0.1 at 2010-09-12 11:29:23) [GET]
  Parameters: {"_dc"=>"1284280162777", "proforma_id"=>"3"}
  [4;36;1mProfTarifCalc Load (1.0ms)[0m   [0;1mSELECT * FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = '3') [0m
Completed in 23ms (View: 10, DB: 3) | 200 OK [http://localhost/prof_tarif_calcs?_dc=1284280162777&proforma_id=3]


Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:34:42) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1409,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1410,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1411,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1412,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1413,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1414,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1415,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1416,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1417,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00+03:00\",\"sailed\":\"2010-08-23T10:30:00+03:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;35;1mProforma Load (1.0ms)[0m   [0mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;36;1mProfTarifCalc Delete all (124.0ms)[0m   [0;1mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;35;1mProfTarifCalc Create (2.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:34:42', '2010-09-12 08:34:42', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:34:42', '2010-09-12 08:34:42', 'GT * 0.415', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', '110 *2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:34:42', '2010-09-12 08:34:42', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', '13524.00 * 2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', 'Passengers * 300', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:34:42', '2010-09-12 08:34:42', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
Completed in 260ms (View: 7, DB: 129) | 200 OK [http://localhost/proformas/3]


Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:34:43) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1409,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1410,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1411,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1412,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1413,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1414,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1415,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1416,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1417,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00\",\"sailed\":\"2010-08-23T10:30:00+03:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;36;1mProforma Load (1.0ms)[0m   [0;1mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;35;1mProfTarifCalc Delete all (98.0ms)[0m   [0mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;36;1mProfTarifCalc Create (4.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (1.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'GT * 0.415', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '110 *2', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '13524.00 * 2', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (1.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'Passengers * 300', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
Completed in 270ms (View: 8, DB: 107) | 200 OK [http://localhost/proformas/3]


Processing ProformasController#update (for 127.0.0.1 at 2010-09-12 11:34:43) [PUT]
  Parameters: {"tarifs"=>"[{\"id\":1409,\"tarif_id\":15,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1410,\"tarif_id\":13,\"proforma_id\":3,\"val\":9664.1,\"description\":\"GT * 0.415\"},{\"id\":1411,\"tarif_id\":12,\"proforma_id\":3,\"val\":220,\"description\":\"110 *2\"},{\"id\":1412,\"tarif_id\":11,\"proforma_id\":3,\"val\":419.17,\"description\":\"0.018 * GW\"},{\"id\":1413,\"tarif_id\":10,\"proforma_id\":3,\"val\":27048,\"description\":\"13524.00 * 2\"},{\"id\":1414,\"tarif_id\":9,\"proforma_id\":3,\"val\":7350,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1415,\"tarif_id\":8,\"proforma_id\":3,\"val\":8064,\"description\":\" incl. 40% rebate. $50.10(1) incl. 30% rebate.  $50.10(3)\"},{\"id\":1416,\"tarif_id\":7,\"proforma_id\":3,\"val\":0,\"description\":\"Passengers * 300\"},{\"id\":1417,\"tarif_id\":6,\"proforma_id\":3,\"val\":0,\"description\":\"Empty\"}]", "data"=>"{\"id\":3,\"status\":0,\"currency_id\":1,\"date_curr\":\"2010-08-20T00:00:00\",\"vessel_id\":43,\"port_id\":183,\"arrived\":\"2010-08-23T08:45:00\",\"sailed\":\"2010-08-23T13:00:00\",\"estimated_arrive\":\"2010-08-23T00:00:00\",\"gw\":23287,\"calls\":300,\"pilotage\":0,\"passengers\":100,\"registration_date\":\"2009-05-12T00:00:00\"}", "id"=>"3"}
  [4;35;1mProforma Load (1.0ms)[0m   [0mSELECT * FROM "proformas" WHERE ("proformas"."id" = 3) [0m

  [4;36;1mProfTarifCalc Delete all (116.0ms)[0m   [0;1mDELETE FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = 3) [0m
  [4;35;1mProfTarifCalc Create (4.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(15, 3, 419.17, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '0.018 * GW', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(13, 3, 9664.1, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'GT * 0.415', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(12, 3, 220.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '110 *2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(11, 3, 419.17, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '0.018 * GW', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(10, 3, 27048.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', '13524.00 * 2', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(9, 3, 7350.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(8, 3, 8064.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', ' incl. 40% rebate. $50.10(1) incl. 30% rebate. $50.10(3)', NULL)[0m
  [4;36;1mProfTarifCalc Create (0.0ms)[0m   [0;1mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(7, 3, 0.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'Passengers * 300', NULL)[0m
  [4;35;1mProfTarifCalc Create (0.0ms)[0m   [0mINSERT INTO "prof_tarif_calcs" ("tarif_id", "proforma_id", "val", "created_at", "updated_at", "description", "remark") VALUES(6, 3, 0.0, '2010-09-12 08:34:43', '2010-09-12 08:34:43', 'Empty', NULL)[0m
WARNING: Can't mass-assign these protected attributes: id
  [4;36;1mProforma Update (3.0ms)[0m   [0;1mUPDATE "proformas" SET "sailed" = '2010-08-23 10:00:00', "updated_at" = '2010-09-12 08:34:44' WHERE "id" = 3[0m
Completed in 489ms (View: 13, DB: 126) | 200 OK [http://localhost/proformas/3]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:34:56) [GET]
  Parameters: {"_dc"=>"1284280496366", "port_id"=>"183"}
Id= 183
  [4;35;1mPort Load (1.0ms)[0m   [0mSELECT "ports".id FROM "ports" WHERE ("ports"."id" = 183) LIMIT 1[0m
  [4;36;1mPort Load (0.0ms)[0m   [0;1mSELECT * FROM "ports" WHERE ("ports"."id" = 183) [0m
  [4;35;1mTarifCalculation Load (1.0ms)[0m   [0mSELECT * FROM "tarif_calculations" WHERE (port_id = 183) ORDER BY tarif_calculations.id DESC LIMIT 1[0m
  [4;36;1mTarif Load (1.0ms)[0m   [0;1mSELECT * FROM "tarifs" WHERE ("tarifs".tarif_calculation_id = 9) [0m
Completed in 115ms (View: 47, DB: 5) | 200 OK [http://localhost/ports/tarifs?_dc=1284280496366&port_id=183]


Processing ProfTarifCalcsController#index (for 127.0.0.1 at 2010-09-12 11:34:56) [GET]
  Parameters: {"_dc"=>"1284280496372", "proforma_id"=>"3"}
  [4;35;1mProfTarifCalc Load (1.0ms)[0m   [0mSELECT * FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = '3') [0m
Completed in 58ms (View: 10, DB: 2) | 200 OK [http://localhost/prof_tarif_calcs?_dc=1284280496372&proforma_id=3]


Processing BaseController#show (for 127.0.0.1 at 2010-09-12 11:37:58) [GET]
Rendering base/show
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://localhost/base/show]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:38:01) [GET]
  Parameters: {"_dc"=>"1284280681419"}
  [4;36;1mCountry Load (14.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 223ms (View: 187, DB: 15) | 200 OK [http://localhost/countries?_dc=1284280681419]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:38:01) [GET]
  Parameters: {"_dc"=>"1284280681438"}
  [4;35;1mCurrency Load (0.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 23ms (View: 9, DB: 2) | 200 OK [http://localhost/currencies?_dc=1284280681438]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:38:02) [GET]
  Parameters: {"_dc"=>"1284280681453"}
  [4;36;1mPort Load (6.0ms)[0m   [0;1mSELECT * FROM "ports" [0m
Completed in 61ms (View: 38, DB: 8) | 200 OK [http://localhost/ports?_dc=1284280681453]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:38:02) [GET]
  Parameters: {"_dc"=>"1284280681443"}
  [4;35;1mVesselType Load (1.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 22ms (View: 11, DB: 2) | 200 OK [http://localhost/vessel_types?_dc=1284280681443]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:38:02) [GET]
  Parameters: {"_dc"=>"1284280681448"}
  [4;36;1mVessel Load (2.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 37ms (View: 23, DB: 3) | 200 OK [http://localhost/vessels?_dc=1284280681448]


Processing CountriesController#show (for 127.0.0.1 at 2010-09-12 11:38:02) [GET]
  Parameters: {"_dc"=>"1284280682047", "id"=>"with_ports"}
  [4;35;1mCountry Load (2.0ms)[0m   [0mselect distinct countries.* from countries inner join ports where ports.country=countries.id[0m
Completed in 22ms (View: 10, DB: 4) | 200 OK [http://localhost/countries/with_ports?_dc=1284280682047]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:38:03) [GET]
  Parameters: {"_dc"=>"1284280682992"}
  [4;36;1mCountry Load (14.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 220ms (View: 187, DB: 16) | 200 OK [http://localhost/countries?_dc=1284280682992]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:38:03) [GET]
  Parameters: {"_dc"=>"1284280683388"}
  [4;35;1mCurrency Load (1.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 18ms (View: 7, DB: 3) | 200 OK [http://localhost/currencies?_dc=1284280683388]


Processing IceClassesController#index (for 127.0.0.1 at 2010-09-12 11:38:03) [GET]
  Parameters: {"_dc"=>"1284280683596"}
  [4;36;1mIceClass Load (0.0ms)[0m   [0;1mSELECT * FROM "ice_classes" [0m
Completed in 20ms (View: 9, DB: 1) | 200 OK [http://localhost/ice_classes?_dc=1284280683596]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:38:03) [GET]
  Parameters: {"_dc"=>"1284280683852"}
  [4;35;1mVesselType Load (1.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 22ms (View: 10, DB: 2) | 200 OK [http://localhost/vessel_types?_dc=1284280683852]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:38:04) [GET]
  Parameters: {"_dc"=>"1284280684053"}
  [4;36;1mVessel Load (2.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 69ms (View: 54, DB: 3) | 200 OK [http://localhost/vessels?_dc=1284280684053]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:38:04) [GET]
  Parameters: {"_dc"=>"1284280684307"}
  [4;35;1mPort Load (5.0ms)[0m   [0mSELECT * FROM "ports" [0m
Completed in 53ms (View: 36, DB: 6) | 200 OK [http://localhost/ports?_dc=1284280684307]


Processing TreeElementsController#index (for 127.0.0.1 at 2010-09-12 11:38:04) [GET]
  Parameters: {"_dc"=>"1284280684597", "node"=>"source"}
  [4;36;1mTreeElement Load (0.0ms)[0m   [0;1mSELECT * FROM "tree_elements" [0m
  [4;35;1mTreeElement Load (1.0ms)[0m   [0mselect 
0 id, 'All' text, '{getPanel:function() {return Ports.showPanel(-1);}}' tag, 3 parent_id, 1000 sort_order, 'true' leaf 
union
SELECT distinct 
c.id, c.text, '{getPanel:function() {return Ports.showPanel('|| c.id ||');}}' tag, 3 parent_id, count(*) sort_order, 'true' leaf 
from countries c inner join ports p on c.id=p.country group by c.id, c.text, leaf order by sort_order desc[0m
Completed in 23ms (View: 7, DB: 3) | 200 OK [http://localhost/tree_elements?_dc=1284280684597&node=source]


Processing ProformasController#index (for 127.0.0.1 at 2010-09-12 11:38:09) [GET]
  Parameters: {"_dc"=>"1284280689522"}
  [4;36;1mProforma Load (1.0ms)[0m   [0;1mSELECT * FROM "proformas" [0m
Completed in 24ms (View: 11, DB: 3) | 200 OK [http://localhost/proformas?_dc=1284280689522]


Processing PortsController#with_tarifs (for 127.0.0.1 at 2010-09-12 11:38:09) [GET]
  Parameters: {"_dc"=>"1284280689538"}
  [4;35;1mPort Load (2.0ms)[0m   [0mSELECT distinct * FROM ports a where exists (select 1 from tarif_calculations b inner join tarifs c on b.id=c.tarif_calculation_id where a.id=b.port_id) [0m
Completed in 22ms (View: 9, DB: 4) | 200 OK [http://localhost/ports/with_tarifs?_dc=1284280689538]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:38:10) [GET]
  Parameters: {"_dc"=>"1284280689577", "port_id"=>"-1"}
Id= -1
Completed in 10ms (View: 5, DB: 2) | 200 OK [http://localhost/ports/tarifs?_dc=1284280689577&port_id=-1]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:38:12) [GET]
  Parameters: {"_dc"=>"1284280691992", "port_id"=>"183"}
Id= 183
  [4;36;1mPort Load (0.0ms)[0m   [0;1mSELECT "ports".id FROM "ports" WHERE ("ports"."id" = 183) LIMIT 1[0m
  [4;35;1mPort Load (0.0ms)[0m   [0mSELECT * FROM "ports" WHERE ("ports"."id" = 183) [0m
  [4;36;1mTarifCalculation Load (0.0ms)[0m   [0;1mSELECT * FROM "tarif_calculations" WHERE (port_id = 183) ORDER BY tarif_calculations.id DESC LIMIT 1[0m
  [4;35;1mTarif Load (1.0ms)[0m   [0mSELECT * FROM "tarifs" WHERE ("tarifs".tarif_calculation_id = 9) [0m
Completed in 47ms (View: 15, DB: 3) | 200 OK [http://localhost/ports/tarifs?_dc=1284280691992&port_id=183]


Processing ProfTarifCalcsController#index (for 127.0.0.1 at 2010-09-12 11:38:12) [GET]
  Parameters: {"_dc"=>"1284280691998", "proforma_id"=>"3"}
  [4;36;1mProfTarifCalc Load (1.0ms)[0m   [0;1mSELECT * FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = '3') [0m
Completed in 28ms (View: 11, DB: 2) | 200 OK [http://localhost/prof_tarif_calcs?_dc=1284280691998&proforma_id=3]


Processing BaseController#show (for 127.0.0.1 at 2010-09-12 11:39:44) [GET]
Redirected to http://localhost:3000/login
Filter chain halted as [:auth] rendered_or_redirected.
Completed in 2ms (DB: 1) | 302 Found [http://localhost/base/show]


Processing LoginController#index (for 127.0.0.1 at 2010-09-12 11:39:45) [GET]
indx
Rendering login/index
Completed in 5ms (View: 3, DB: 0) | 200 OK [http://localhost/login]


Processing LoginController#create (for 127.0.0.1 at 2010-09-12 11:39:55) [POST]
  Parameters: {"login"=>"denis", "pwd"=>"111111"}
2bfcb1fad7742b64c6e9b748fcdad41e
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM "users" WHERE (login='denis') LIMIT 1[0m
Completed in 17ms (View: 4, DB: 1) | 200 OK [http://localhost/login/]


Processing BaseController#show (for 127.0.0.1 at 2010-09-12 11:39:56) [GET]
Rendering base/show
Completed in 11ms (View: 7, DB: 2) | 200 OK [http://localhost/base/show]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:39:56) [GET]
  Parameters: {"_dc"=>"1284280796804"}
  [4;36;1mCountry Load (14.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 194ms (View: 161, DB: 16) | 200 OK [http://localhost/countries?_dc=1284280796804]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:39:57) [GET]
  Parameters: {"_dc"=>"1284280796807"}
  [4;35;1mCurrency Load (1.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 19ms (View: 8, DB: 3) | 200 OK [http://localhost/currencies?_dc=1284280796807]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:39:57) [GET]
  Parameters: {"_dc"=>"1284280796810"}
  [4;36;1mVesselType Load (1.0ms)[0m   [0;1mSELECT * FROM "vessel_types" [0m
Completed in 22ms (View: 11, DB: 2) | 200 OK [http://localhost/vessel_types?_dc=1284280796810]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:39:57) [GET]
  Parameters: {"_dc"=>"1284280796816"}
  [4;35;1mVessel Load (2.0ms)[0m   [0mSELECT * FROM "vessels" [0m
Completed in 39ms (View: 24, DB: 4) | 200 OK [http://localhost/vessels?_dc=1284280796816]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:39:57) [GET]
  Parameters: {"_dc"=>"1284280796820"}
  [4;36;1mPort Load (5.0ms)[0m   [0;1mSELECT * FROM "ports" [0m
Completed in 54ms (View: 36, DB: 6) | 200 OK [http://localhost/ports?_dc=1284280796820]


Processing CountriesController#show (for 127.0.0.1 at 2010-09-12 11:39:58) [GET]
  Parameters: {"_dc"=>"1284280796878", "id"=>"with_ports"}
  [4;35;1mCountry Load (2.0ms)[0m   [0mselect distinct countries.* from countries inner join ports where ports.country=countries.id[0m
Completed in 23ms (View: 10, DB: 3) | 200 OK [http://localhost/countries/with_ports?_dc=1284280796878]


Processing CountriesController#index (for 127.0.0.1 at 2010-09-12 11:39:58) [GET]
  Parameters: {"_dc"=>"1284280798079"}
  [4;36;1mCountry Load (13.0ms)[0m   [0;1mSELECT * FROM "countries" [0m
Completed in 225ms (View: 191, DB: 15) | 200 OK [http://localhost/countries?_dc=1284280798079]


Processing CurrenciesController#index (for 127.0.0.1 at 2010-09-12 11:39:58) [GET]
  Parameters: {"_dc"=>"1284280798480"}
  [4;35;1mCurrency Load (1.0ms)[0m   [0mSELECT * FROM "currencies" [0m
Completed in 18ms (View: 7, DB: 3) | 200 OK [http://localhost/currencies?_dc=1284280798480]


Processing IceClassesController#index (for 127.0.0.1 at 2010-09-12 11:39:58) [GET]
  Parameters: {"_dc"=>"1284280798656"}
  [4;36;1mIceClass Load (1.0ms)[0m   [0;1mSELECT * FROM "ice_classes" [0m
Completed in 18ms (View: 7, DB: 3) | 200 OK [http://localhost/ice_classes?_dc=1284280798656]


Processing VesselTypesController#index (for 127.0.0.1 at 2010-09-12 11:39:59) [GET]
  Parameters: {"_dc"=>"1284280798909"}
  [4;35;1mVesselType Load (0.0ms)[0m   [0mSELECT * FROM "vessel_types" [0m
Completed in 21ms (View: 10, DB: 2) | 200 OK [http://localhost/vessel_types?_dc=1284280798909]


Processing VesselsController#index (for 127.0.0.1 at 2010-09-12 11:39:59) [GET]
  Parameters: {"_dc"=>"1284280799098"}
  [4;36;1mVessel Load (3.0ms)[0m   [0;1mSELECT * FROM "vessels" [0m
Completed in 70ms (View: 55, DB: 4) | 200 OK [http://localhost/vessels?_dc=1284280799098]


Processing PortsController#index (for 127.0.0.1 at 2010-09-12 11:39:59) [GET]
  Parameters: {"_dc"=>"1284280799344"}
  [4;35;1mPort Load (5.0ms)[0m   [0mSELECT * FROM "ports" [0m
Completed in 54ms (View: 36, DB: 6) | 200 OK [http://localhost/ports?_dc=1284280799344]


Processing TreeElementsController#index (for 127.0.0.1 at 2010-09-12 11:39:59) [GET]
  Parameters: {"_dc"=>"1284280799642", "node"=>"source"}
  [4;36;1mTreeElement Load (1.0ms)[0m   [0;1mSELECT * FROM "tree_elements" [0m
  [4;35;1mTreeElement Load (1.0ms)[0m   [0mselect 
0 id, 'All' text, '{getPanel:function() {return Ports.showPanel(-1);}}' tag, 3 parent_id, 1000 sort_order, 'true' leaf 
union
SELECT distinct 
c.id, c.text, '{getPanel:function() {return Ports.showPanel('|| c.id ||');}}' tag, 3 parent_id, count(*) sort_order, 'true' leaf 
from countries c inner join ports p on c.id=p.country group by c.id, c.text, leaf order by sort_order desc[0m
Completed in 25ms (View: 7, DB: 3) | 200 OK [http://localhost/tree_elements?_dc=1284280799642&node=source]


Processing ProformasController#index (for 127.0.0.1 at 2010-09-12 11:40:02) [GET]
  Parameters: {"_dc"=>"1284280802647"}
  [4;36;1mProforma Load (1.0ms)[0m   [0;1mSELECT * FROM "proformas" [0m
Completed in 27ms (View: 12, DB: 3) | 200 OK [http://localhost/proformas?_dc=1284280802647]


Processing PortsController#with_tarifs (for 127.0.0.1 at 2010-09-12 11:40:03) [GET]
  Parameters: {"_dc"=>"1284280802667"}
  [4;35;1mPort Load (1.0ms)[0m   [0mSELECT distinct * FROM ports a where exists (select 1 from tarif_calculations b inner join tarifs c on b.id=c.tarif_calculation_id where a.id=b.port_id) [0m
Completed in 23ms (View: 9, DB: 2) | 200 OK [http://localhost/ports/with_tarifs?_dc=1284280802667]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:40:03) [GET]
  Parameters: {"_dc"=>"1284280802752", "port_id"=>"-1"}
Id= -1
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://localhost/ports/tarifs?_dc=1284280802752&port_id=-1]


Processing PortsController#tarifs (for 127.0.0.1 at 2010-09-12 11:40:07) [GET]
  Parameters: {"_dc"=>"1284280806879", "port_id"=>"183"}
Id= 183
  [4;36;1mPort Load (0.0ms)[0m   [0;1mSELECT "ports".id FROM "ports" WHERE ("ports"."id" = 183) LIMIT 1[0m
  [4;35;1mPort Load (1.0ms)[0m   [0mSELECT * FROM "ports" WHERE ("ports"."id" = 183) [0m
  [4;36;1mTarifCalculation Load (1.0ms)[0m   [0;1mSELECT * FROM "tarif_calculations" WHERE (port_id = 183) ORDER BY tarif_calculations.id DESC LIMIT 1[0m
  [4;35;1mTarif Load (1.0ms)[0m   [0mSELECT * FROM "tarifs" WHERE ("tarifs".tarif_calculation_id = 9) [0m
Completed in 45ms (View: 14, DB: 4) | 200 OK [http://localhost/ports/tarifs?_dc=1284280806879&port_id=183]


Processing ProfTarifCalcsController#index (for 127.0.0.1 at 2010-09-12 11:40:07) [GET]
  Parameters: {"_dc"=>"1284280806882", "proforma_id"=>"3"}
  [4;36;1mProfTarifCalc Load (1.0ms)[0m   [0;1mSELECT * FROM "prof_tarif_calcs" WHERE ("prof_tarif_calcs"."proforma_id" = '3') [0m
Completed in 25ms (View: 11, DB: 3) | 200 OK [http://localhost/prof_tarif_calcs?_dc=1284280806882&proforma_id=3]
